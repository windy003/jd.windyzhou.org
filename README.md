# 建德本地信息发布系统

一个基于 Flask 的本地信息发布网站，支持站长发布信息，用户浏览信息。账号密码安全存储在服务器端。

## 功能特点

### 前台页面
- 📱 移动端优化设计
- 🏷️ 支持分类筛选（出售、求购、招聘、求职、租房、其他）
- 📞 显示站长联系方式
- 🔍 只读浏览，用户无法发布

### 后台管理
- 🔐 安全的账号密码登录（密码哈希加密）
- ✏️ 发布新信息
- 🗑️ 删除已发布信息
- 📋 管理所有信息

## 项目结构

```
tmp/
├── app.py                 # Flask 后端应用
├── requirements.txt       # Python 依赖
├── posts.json            # 数据存储文件（自动生成）
├── templates/
│   ├── index.html        # 前台页面
│   └── admin.html        # 后台管理页面
└── README.md             # 使用说明
```

## 安装步骤

### 1. 安装 Python
确保已安装 Python 3.7 或更高版本。

检查 Python 版本：
```bash
python --version
```

### 2. 安装依赖
在项目目录下运行：
```bash
pip install -r requirements.txt
```

### 3. 配置账号密码和联系方式

打开 `app.py` 文件，修改以下内容：

**修改账号密码（第 13-14 行）：**
```python
ADMIN_USERNAME = 'admin'                              # 修改为你的账号
ADMIN_PASSWORD_HASH = generate_password_hash('123456')  # 修改引号内的密码
```

**修改站长联系方式（第 17 行）：**
```python
ADMIN_CONTACT = "微信: webmaster123 | 电话: 138-0000-0000"  # 修改为你的联系方式
```

### 4. 启动服务器
```bash
python app.py
```

启动成功后会显示：
```
==================================================
服务器启动成功！
前台页面: http://127.0.0.1:5000/
后台管理: http://127.0.0.1:5000/admin
默认账号: admin
默认密码: 123456
==================================================
```

## 使用说明

### 访问前台
在浏览器打开：`http://127.0.0.1:5000/`
- 查看所有已发布的信息
- 使用分类筛选器筛选信息
- 查看站长联系方式

### 访问后台管理
在浏览器打开：`http://127.0.0.1:5000/admin`
1. 输入账号密码登录
2. 发布新信息
3. 管理已发布的信息

### 手机访问
如果要让局域网内的手机访问：
1. 查看电脑的 IP 地址（Windows: `ipconfig`，Mac/Linux: `ifconfig`）
2. 手机连接到同一个 WiFi
3. 在手机浏览器访问：`http://你的电脑IP:5000/`

例如：`http://192.168.1.100:5000/`

## 安全性说明

✅ **已实现的安全措施：**
- 密码使用 Werkzeug 的 `generate_password_hash` 进行哈希加密
- 账号密码存储在服务器端，客户端无法看到
- 使用 Session 管理登录状态
- 所有管理操作需要登录验证

⚠️ **注意事项：**
- 默认使用 HTTP 协议，不建议在公网使用
- 如需公网部署，建议配置 HTTPS
- 修改 `app.secret_key` 为随机字符串

## 数据存储

所有信息数据存储在 `posts.json` 文件中，格式为 JSON。
- 服务器启动时自动加载
- 发布/删除信息时自动保存

## 常见问题

### 1. 如何修改端口？
修改 `app.py` 最后一行：
```python
app.run(debug=True, host='0.0.0.0', port=5000)  # 修改 port 参数
```

### 2. 如何重置密码？
修改 `app.py` 第 14 行的密码，重启服务器即可。

### 3. 数据丢失怎么办？
定期备份 `posts.json` 文件。

### 4. 如何部署到服务器？
- 使用 Gunicorn 或 uWSGI 作为生产服务器
- 配置 Nginx 作为反向代理
- 建议使用 HTTPS（Let's Encrypt）

## 技术栈

- **后端：** Python + Flask
- **前端：** HTML + CSS + JavaScript
- **数据存储：** JSON 文件
- **安全：** Werkzeug 密码哈希

## 开发者

如需修改样式或功能，请编辑：
- `templates/index.html` - 前台页面
- `templates/admin.html` - 后台管理页面
- `app.py` - 后端逻辑

---

**祝使用愉快！** 如有问题，请检查控制台输出的错误信息。
